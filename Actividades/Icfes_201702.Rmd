---
title: "Análisis exploratorio ICFES 2017-02 Colombia"
author: "Edimer David Jaramillo"
date: "8 de abril de 2019"
output:
  ioslides_presentation:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Lectura y conversión de datos

## Lectura de datos

```{r, eval=FALSE}
datos <- read.csv("Saber_11__2017-2.csv", encoding = "UTF-8")
```

## Conversión de datos

- La conversión de los datos a formato .Rdata facilitará la lectura en procesos posteriores.
- Para guardar o exportar a formato .Rdata se usa la función `save()`.

```{r, eval=FALSE}
save(datos, file = "Icfes_201702.Rdata", compress = "xz")
```

## Cargando datos

- Para cargar los datos en formato .Rdata se usa la función `load()`.

```{r}
load("Icfes_201702.Rdata")
```

# Gestionando datos

## Bibliotecas necesarias

```{r, message=FALSE, warning=FALSE}
library(dplyr)
library(tidyr)
library(ggplot2)
```

## Acotando datos

```{r}
datos2 <- datos %>% 
  filter(estu_nacionalidad == "COLOMBIA") %>% 
  select(estu_genero, estu_depto_reside, fami_tienecomputador,
         fami_comecarnepescadohuevo, punt_global) %>% 
  filter(estu_genero != "-" & estu_depto_reside != "-"
         & fami_tienecomputador != "-"
         & fami_comecarnepescadohuevo != "-") %>% 
  droplevels()
```

**Nota:** Del total de datos iniciales (546162) quedan después de depurar 515021, es decir, el 94.29%.

La función `droplevels()` permite eliminar niveles sobrantes de un factor. Por ejemplo, en este caso los niveles iguales a "-" se eliminan con dicha función.

# Descriptivo y exploratorio

## Puntaje global vs género

```{r}
datos2 %>% 
  group_by(estu_genero) %>% 
  summarise(Promedio = mean(punt_global),
            DE = sd(punt_global),
            minimo = min(punt_global),
            maximo = max(punt_global),
            mediana = median(punt_global),
            P98 = quantile(punt_global, probs = 0.98))
```

## Puntaje global vs departamento (1/2)

```{r}
puntg_depto <- datos2 %>% 
  group_by(estu_depto_reside) %>% 
  summarise(Promedio = mean(punt_global),
            DE = sd(punt_global),
            minimo = min(punt_global),
            maximo = max(punt_global),
            mediana = median(punt_global),
            P98 = quantile(punt_global, probs = 0.98)) %>% 
  arrange(desc(Promedio))
```

## Puntaje global vs departamento (2/2)

```{r}
puntg_depto
```

## Puntaje global vs PC

```{r}
datos2 %>% 
  group_by(fami_tienecomputador) %>% 
  summarise(Promedio = mean(punt_global),
            DE = sd(punt_global),
            minimo = min(punt_global),
            maximo = max(punt_global),
            mediana = median(punt_global),
            P98 = quantile(punt_global, probs = 0.98))
```

## Puntaje global vs consumo de proteína

```{r}
datos2 %>% 
  group_by(fami_comecarnepescadohuevo) %>% 
  summarise(Promedio = mean(punt_global),
            DE = sd(punt_global),
            minimo = min(punt_global),
            maximo = max(punt_global),
            mediana = median(punt_global),
            P98 = quantile(punt_global, probs = 0.98)) %>% 
  arrange(desc(Promedio))
```

# Análisis gráfico

## Registros por género (1/2)

```{r}
graf_genero <- datos2 %>% 
  group_by(estu_genero) %>% 
  summarise(Total = n()) %>% 
  ggplot(data = ., mapping = aes(x = estu_genero, y = Total)) +
  geom_col()
```

## Registros por género (2/2)

```{r}
graf_genero
```

## Gráfico de dispersión (1)

```{r}
ggplot(data = datos, mapping = aes(x = punt_matematicas,
                                   y = punt_ingles)) +
  geom_point()
```

## Gráfico de dispersión (2)

```{r}
ggplot(data = datos, mapping = aes(x = punt_matematicas,
                                   y = punt_ingles,
                                   color = estu_genero)) +
  geom_point()
```

## Gráfico de dispersión (3)

```{r}
ggplot(data = datos, mapping = aes(x = punt_matematicas,
                                   y = punt_ingles,
                                   color = estu_genero)) +
  geom_point() + geom_smooth()
```

## Gráfico de dispersión (4)

```{r}
ggplot(data = datos, mapping = aes(x = punt_matematicas,
                                   y = punt_ingles)) +
  geom_bin2d()
```

## Gráfico de dispersión (5)

```{r}
ggplot(data = datos, mapping = aes(x = punt_matematicas,
                                   y = punt_ingles)) +
  geom_bin2d() + geom_smooth()
```
